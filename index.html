<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Experiment Metadata</title>

    <!-- JS -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.9/d3.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script src="lib/select2.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/js/bootstrap-datepicker.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2014-11-29/FileSaver.min.js"></script>
    <script src="lib/filereader.js"></script>
    <script src="lib/csv.min.js"></script>
    <script src="lib/bootstrap-number-input.js"></script>
    <script src="lib/jszip.min.js"></script>
    <script src="main.js"></script>
    <script src="https://bootstrap-tagsinput.github.io/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"></script>

    <!-- CSS -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" />
    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.min.css" rel="stylesheet" />
    <link href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/css/bootstrap-datepicker.min.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://bootstrap-tagsinput.github.io/bootstrap-tagsinput/dist/bootstrap-tagsinput.css">

    <!-- Bootstrap Toggle -->
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="google" content="notranslate">
    <meta http-equiv="Content-Language" content="en">
  </head>

   <script>
    $(document).ready(function(){
      $('html, body').scrollTop(0);

      $(window).on('load', function() {
        setTimeout(function(){
          $('html, body').scrollTop(0);
        }, 0);
      });
    });
  </script>
  
  <body>
    <div class="text-center">
      <h1>
        Experimental Metadata
        <small>[<a href="http://github.com/SBRG/experiment_metadata">GitHub</a>]</small>
      </h1>

      <p class="lead">
        Use this tool to generate one or more CSV files with all the relevant metadata for
        an experiment.
      </p>

      <div id="intropage">
        <div id="alert"></div>

        <label class="labels" for="dropdown_forms">Step 1. Choose a form type</label>
        <input type="text" id="dropdown_formtype" list="formtype" placeholder="e.g. Generic, ALE">

        <datalist id="formtype">
          <option id="generic" value="Generic">
            <option id="ale" value="ALE">
        </datalist>

        <label class="labels" for="dropdown_forms">Step 2. Choose single or multiple</label>
        <input type="text" id="dropdown_formnumber" list="formnumber" placeholder="e.g. single, mutiple">

        <datalist id="formnumber">
          <option id="single" value="single files">
            <option id="spreadsheet" value="create multiple files from spreadsheet">
        </datalist>
        
        <div>
            <input type="button" id="forms" onclick="initializeTheSelectedValues()" value="submit">
        </div>


        <script>
        var initializeTheSelectedValues = function() {
          alert = false
          if ($('#formnumber option[value="' + $('#dropdown_formnumber').val() + '"]').attr('id') == undefined) {
            addAlert('please select  number of files before sumbit')
            alert = true
          }
          if ($('#formtype option[value="' + $('#dropdown_formtype').val() + '"]').attr('id') == undefined) {
            addAlert('please select  type of form before sumbit')
            alert = true
          }

          var forminput =($('#formtype option[value="' + $('#dropdown_formtype').val() + '"]').attr('id') +"_"+ $('#formnumber option[value="' + $('#dropdown_formnumber').val() + '"]').attr('id'))

          if (alert == false) {
            create_form(forminput)
            console.log(forminput)
          }

        }
        </script>
      </div>

    </div>

    <div class="container">
        <div id="single_file_instructions">
          <li>SINGLE FILE INSTRUCTIONS</li>
        <p>
          <i>Using this tool at SBRG:</i>
        <ol>
          <li>
            <strong>Create a new folder</strong> on Nucleoid with the form
            <code>data/raw_data/{User}/{Project Name}/{Folder Name}/</code>.
          </li>
          <ul>
            <li>
              Each data type collected on a given day is put into a unique folder.
            </li>
            <li>
              The Project Name should be short, unique, and descriptive.
            </li>
            <li>
              The Folder Name format is as follows <code>{YYYY}-{MM}-{DD}_{data type}</code>.
            </li>
            <li>
              The Folder Name is provided at the bottom of the page.
            </li>
            <li>
              If there are duplicates, then add <code>_1</code>,
              <code>_2</code>, &hellip; to the end.
            </li>
            <li>
              Example: <code>data/raw_data/ianiefuna/Y-ome/2015-11-19_Tn-Seq_1/</code>
            </li>
          </ul>
          <li>
            <strong>Copy</strong> raw data files (e.g. <code>*.fastq.gz</code>
            from the MiSeq) to the new folder.
          </li>
          <li>
            <strong>Fill out this form</strong>, save the CSV file, and put it
            in your folder.
          </li>
          </ol>
        </p>
        <p>
          <i>Creating metadata for multiple samples:</i>
          <ol>
        <li>
          <strong>Spreadsheet to Metadata</strong>: <u>download template spreadsheet and fill out all required information under the required field names.</u>
          <ul>
              <li><strong> Warning: Do not change format of template spreadsheet. Input data starting from row 3</strong></li>
              <li>Each row represents a new sample metadata file.</li>
              <li>Examples of <u>valid</u> input located on row 1 of template spreadsheet.</li>
          </ul>
        </li>
        <li>
          Drag-and-drop spreadsheet containing your sample's data to generate metadata CSV's.
        </li>
        </ol>
      </p>
      <p>
        <i>Creating a spreadsheet from multiple metadata files or automatically populating this form with 1 metadata file:</i>
        <ol>
        <li>
          <strong>Metadata to Spreadsheet / Metadata to Metadata</strong>: <u> Edit one or more existing metadata files. </u>
          <ul>
              <li>Drag-and-drop one Metadata CSV File then edit on the form below, when finished <strong>click "Download CSV or SpreadSheet File"</strong> to generate and edited CSV File. </li>
              <li>Drag-and-drop two or more Metadata CSV Files and <strong>click "Download CSV or SpreadSheet File"</strong> to generate Metadata spreadsheet of the CSV Files. The spreadsheet can then be edited and Dragged-and-Dropped into the <strong>Spreadsheet to MetaData</strong> drag-and-drop to generate metadata CSV's. </li>
          </ul>
        </li>
      </ol>
      </p>
        <hr/>
        </div>

        <div id="spreadsheet_instructions">
          <li>Multiple FILE INSTRUCTIONS</li>
        <p>
          <i>Using this tool at SBRG:</i>
        <ol>
          <li>
            <strong>Create a new folder</strong> on Nucleoid with the form
            <code>data/raw_data/{User}/{Project Name}/{Folder Name}/</code>.
          </li>
          <ul>
            <li>
              Each data type collected on a given day is put into a unique folder.
            </li>
            <li>
              The Project Name should be short, unique, and descriptive.
            </li>
            <li>
              The Folder Name format is as follows <code>{YYYY}-{MM}-{DD}_{data type}</code>.
            </li>
            <li>
              The Folder Name is provided at the bottom of the page.
            </li>
            <li>
              If there are duplicates, then add <code>_1</code>,
              <code>_2</code>, &hellip; to the end.
            </li>
            <li>
              Example: <code>data/raw_data/ianiefuna/Y-ome/2015-11-19_Tn-Seq_1/</code>
            </li>
          </ul>
          <li>
            <strong>Copy</strong> raw data files (e.g. <code>*.fastq.gz</code>
            from the MiSeq) to the new folder.
          </li>
          <li>
            <strong>Fill out this form</strong>, save the CSV file, and put it
            in your folder.
          </li>
          </ol>
        </p>
        <p>
          <i>Creating metadata for multiple samples:</i>
          <ol>
        <li>
          <strong>Spreadsheet to Metadata</strong>: <u>download template spreadsheet and fill out all required information under the required field names.</u>
          <ul>
              <li><strong> Warning: Do not change format of template spreadsheet. Input data starting from row 3</strong></li>
              <li>Each row represents a new sample metadata file.</li>
              <li>Examples of <u>valid</u> input located on row 1 of template spreadsheet.</li>
          </ul>
        </li>
        <li>
          Drag-and-drop spreadsheet containing your sample's data to generate metadata CSV's.
        </li>
        </ol>
      </p>
      <p>
        <i>Creating a spreadsheet from multiple metadata files or automatically populating this form with 1 metadata file:</i>
        <ol>
        <li>
          <strong>Metadata to Spreadsheet / Metadata to Metadata</strong>: <u> Edit one or more existing metadata files. </u>
          <ul>
              <li>Drag-and-drop one Metadata CSV File then edit on the form below, when finished <strong>click "Download CSV or SpreadSheet File"</strong> to generate and edited CSV File. </li>
              <li>Drag-and-drop two or more Metadata CSV Files and <strong>click "Download CSV or SpreadSheet File"</strong> to generate Metadata spreadsheet of the CSV Files. The spreadsheet can then be edited and Dragged-and-Dropped into the <strong>Spreadsheet to MetaData</strong> drag-and-drop to generate metadata CSV's. </li>
          </ul>
        </li>
      </ol>
      </p>
        <hr/>
        </div>









        <div class="panel panel-default"id="csv_drag_and_drop_spreadsheet">
          <div class="panel-heading">
            <strong>Spreadsheet to MetaData</strong>: CSV with required metadata field names.
            <button id="download_example_spreadsheet" type="submit" class="btn btn-default">
              Download Template
            </button>
          </div>
          <div class="panel-body">
            <div id="spreadsheet-upload">Drag and drop Spreadsheet.</div>
          </div>
          <div id="alert"></div>
        </div>
        <!--
        <div class="panel panel-default"id="csv_drag_and_drop_metadata">
          <div class="panel-heading">
            <strong>Metadata to Spreadsheet / Metadata to Metadata</strong>: Load existing CSV file(s) to edit existing CSV(s).
          </div>
          <div class="panel-body">
            <div id="file-upload">Drag and drop CSV file(s).</div>
          </div>
        </div>
        -->
        <div class="panel panel-default"id="single_metadata_sheet">
          <div class="panel-heading"id="Single_Metadata_header">
            Enter or Edit your metadata.
          </div>
          <div id="center-column" class="panel-body">
          </div>
        </div>
        <div class="row">
          <div class="col-sm-8">
            <div class="panel panel-default"id="Save_metadata">
              <div class="panel-heading"id="Save_metadata">
                Save the metadata CSV file/CSV Spreadsheet with your dataset.
              </div>
              <div class="panel-body match-height">
                <button id="submit" type="submit" class="btn btn-default">
                  Download CSV or SpreadSheet File
                </button>
                <span id="required-to-submit" class="alert alert-danger" style="display: none">
                Some required attributes are missing.
              </span>
              </div>
            </div>
          </div>
          <div class="col-sm-4" id="folder-name-panel">
            <div class="panel panel-default">
              <div class="panel-heading">Folder name</div>
              <div class="panel-body match-height">
                <input id="folder-name" class="form-control" onclick="select();" readonly></input>
              </div>
            </div>
          </div>
        </div>
    </div>

    <div class="text-center">
          <footer>
            <div>
              <label><font color='#aaa'>Version 1.6.13</font></label>
            </div>
          </footer>
    </div>
    
  </body>
 
</html>
